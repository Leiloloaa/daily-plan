# 第八关

**副本怪**

- 玩转 Vue3 全家桶
- Vue2 源码
- 工作总结
- Vue3 issue

## 玩转 Vue3 全家桶

- 学习到了简历上项目亮点的介绍
  - 其实很多项目都是增删改查，但是我们为了突出项目可以从数据方面入手
  - 比如虚拟列表的渲染、文件的断点续传

## Vue2 源码

- Vue2 的响应式原理
  - data 中的数据是挂载在 vm 实例上面，所以可以通过 this 直接访问
  - 对象是通过遍历 key 逐个进行劫持
  - 数组则是重写数组方法

对于 template 的解析，Vue 最终会渲染成一个 render 函数。

首先是解析 html 代码生成 AST 语法树，
然后处理静态节点，也可以进行其他的优化
最后是生成 render 函数

- Vue2 的 Mixin 混入原理
  - 主要是通过 mergeOptions 函数，通过一些合并规则遍历合并父子组件

## 工作总结

有几个 apiService 服务，不同的菜单要请求不同的服务（后端的微服务），针对这个问题，在 api 拦截器里针对路由去调用不同的服务地址

## Vue3 issue 4983

问题描述：r 是一个 readonly，rr 是 reactive 变量它的一个属性是 r，针对一个这个属性改变了一次，接着又改回去，发现此时 rr 中 r 已经不是 readonly 对象了，这是为什么呢？

答案：在这个问题修复之前，执行 set 操作的时候，会把这个变量 toRaw，意思是将这个值变成普通的值，所以改变了一次之后，就不会相等了！为了解决这个问题，只要当这个变量是 readonly 的时候，就不处理！